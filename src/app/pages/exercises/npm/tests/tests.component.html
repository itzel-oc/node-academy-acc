<div class="exercise__item">
  <h2 id="exercise-1" class="exercise__item--title">Setting a test environment</h2>
</div>
<mat-accordion>
  <mat-expansion-panel>
    <mat-expansion-panel-header>
      <mat-panel-title>
        Adding mocha to your project
      </mat-panel-title>
    </mat-expansion-panel-header>
    <ul>
      <li>Run the following command</li>
    </ul>
    <app-command-line class="m-t5" [source]="addingMocha"></app-command-line>
    <ul>
      <li>Edit your test script to have the following</li>
    </ul>
    <markdown ngPreserveWhitespaces data-type="text/html">
      > package.json
      ```json
      "scripts": {{ '{' }}
        "test": "mocha './test/unit/**/*.spec.js --exit'"
      {{ '}' }}
      ```
    </markdown>
    <ul>
      <li>Create a directory called <b>test</b> and inside of it add the following file, <b>logger.spec.js</b></li>
    </ul>
    <markdown ngPreserveWhitespaces data-type="text/html">
      > test/logger.spec.js
      ```javascript
      const logger = require('../logger');
      const fs = require('fs');
      const path = require('path');
      const expect = require('chai').expect;
      describe("logger.js", () => {{ '{' }}
        it("Should create a log file with an info level", (done) => {{ '{' }}
          logger("./test/unit/test.txt", "INFO", "Test", () => {{ '{' }}
            const filePath = path.resolve(__dirname, "./test.txt");
            fs.readFile(filePath, "utf8", (err, content) => {{ '{' }}
              if (err) {{ '{' }}
                throw err;
              {{ '}' }}
              expect(/INFO.*Test/gi.test(content)).to.equal(true);
              done();
            {{ '}' }});
          {{ '}' }});
        {{ '}' }})
      {{ '}' }});
      ```
    </markdown>
  </mat-expansion-panel>
</mat-accordion>
